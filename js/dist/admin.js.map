{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@klxf/flarum-maintenance/webpack/bootstrap","webpack://@klxf/flarum-maintenance/webpack/runtime/compat get default export","webpack://@klxf/flarum-maintenance/webpack/runtime/define property getters","webpack://@klxf/flarum-maintenance/webpack/runtime/hasOwnProperty shorthand","webpack://@klxf/flarum-maintenance/external root \"flarum.core.compat['admin/app']\"","webpack://@klxf/flarum-maintenance/external root \"flarum.core.compat['common/extend']\"","webpack://@klxf/flarum-maintenance/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@klxf/flarum-maintenance/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@klxf/flarum-maintenance/external root \"flarum.core.compat['admin/components/DashboardWidget']\"","webpack://@klxf/flarum-maintenance/./src/admin/components/AdminTipsWidget.tsx","webpack://@klxf/flarum-maintenance/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@klxf/flarum-maintenance/external root \"flarum.core.compat['common/components/Button']\"","webpack://@klxf/flarum-maintenance/external root \"flarum.core.compat['admin/components/DashboardPage']\"","webpack://@klxf/flarum-maintenance/./src/admin/index.tsx","webpack://@klxf/flarum-maintenance/./src/admin/defaults.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/DashboardWidget'];","import app from \"flarum/admin/app\";\r\nimport Alert from \"flarum/common/components/Alert\";\r\nimport DashboardWidget from \"flarum/admin/components/DashboardWidget\";\r\n\r\nexport default class AdminTipsWidget extends DashboardWidget {\r\n    className() {\r\n        return \"klxlMaintenanceModeWidget\";\r\n    }\r\n\r\n    content() {\r\n        const title = app.translator.trans(\"klxf-maintenance.admin.dashboard.maintenance-widget.title\");\r\n        const detail = app.translator.trans(\"klxf-maintenance.admin.dashboard.maintenance-widget.detail\");\r\n\r\n        return (\r\n            <Alert\r\n                type=\"error\"\r\n                dismissible={false}\r\n                title={title}\r\n                icon=\"fas fa-hard-hat\"\r\n            >\r\n                {detail}\r\n            </Alert>\r\n        );\r\n    }\r\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/DashboardPage'];","import app from 'flarum/admin/app';\r\nimport { extend } from \"flarum/common/extend\";\r\nimport { defaultTemplate } from \"./defaults\";\r\nimport AdminTipsWidget from \"./components/AdminTipsWidget\";\r\nimport Button from 'flarum/common/components/Button';\r\nimport DashboardPage from \"flarum/admin/components/DashboardPage\";\r\n\r\napp.initializers.add('klxf-maintenance', () => {\r\n    extend(DashboardPage.prototype, \"availableWidgets\", function (items) {\r\n        const enabled = app.data.settings[\"klxf-maintenance.enabled\"];\r\n\r\n        if (enabled === \"1\") {\r\n            items.add(\"klxf-maintenance\", <AdminTipsWidget />, 100);\r\n        }\r\n    });\r\n    app.extensionData\r\n        .for(\"klxf-maintenance\")\r\n        .registerSetting({\r\n            setting: \"klxf-maintenance.enabled\",\r\n            type: \"boolean\",\r\n            label: app.translator.trans(\r\n                \"klxf-maintenance.admin.settings.maintenance-mode-enabled.label\"\r\n            )\r\n        })\r\n        .registerSetting({\r\n            setting: \"klxf-maintenance.title\",\r\n            type: \"text\",\r\n            label: app.translator.trans(\r\n                \"klxf-maintenance.admin.settings.maintenance-mode-title.label\"\r\n            )\r\n        })\r\n        .registerSetting({\r\n            setting: \"klxf-maintenance.message\",\r\n            type: \"text\",\r\n            label: app.translator.trans(\r\n                \"klxf-maintenance.admin.settings.maintenance-mode-message.label\"\r\n            ),\r\n            className: \"FormControl--textarea\",\r\n        })\r\n        .registerSetting({\r\n            setting: \"klxf-maintenance.template\",\r\n            type: \"textarea\",\r\n            label: app.translator.trans(\r\n                \"klxf-maintenance.admin.settings.maintenance-mode-html-template.label\"\r\n            ),\r\n            help: app.translator.trans(\r\n                \"klxf-maintenance.admin.settings.maintenance-mode-html-template.help\"\r\n            ),\r\n            rows: 10\r\n        })\r\n        .registerSetting(function (this: any) {\r\n            return (\r\n                <Button\r\n                    className=\"Button\"\r\n                    onclick={() => {\r\n                        this.settings['klxf-maintenance.template'](defaultTemplate);\r\n                        m.redraw();\r\n                    }}\r\n                >\r\n                    {app.translator.trans('klxf-maintenance.admin.settings.maintenance-mode-html-template.reset-btn')}\r\n                </Button>\r\n            );\r\n        })\r\n        .registerSetting(function () {\r\n            return (\r\n                <div class=\"helpText\" style=\"margin-top: 10px\">\r\n                    <i class=\"fa-icon fas fa-exclamation-circle\"></i> {app.translator.trans('klxf-maintenance.admin.settings.maintenance-mode-html-template.reset-help')}\r\n                </div>\r\n            );\r\n        })\r\n        .registerPermission(\r\n            {\r\n                icon: \"fas fa-hard-hat\",\r\n                label: app.translator.trans(\"klxf-maintenance.admin.permissions.bypass\"),\r\n                permission: \"klxf-maintenance.bypass\",\r\n            },\r\n            \"view\"\r\n        );\r\n});\r\n","export const defaultTemplate = `<html>\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>{{ $settings->get('forum_title') }}</title>\r\n    <style>\r\n        body {\r\n            margin: 0;\r\n        }\r\n        .main {\r\n            text-align: center;\r\n        }\r\n        .footer {\r\n            position: absolute;\r\n            bottom: 0;\r\n            width: 100%;\r\n        }\r\n        .logo-container {\r\n            margin: 64px 0;\r\n        }\r\n        .logo {\r\n            fill: {{ $settings->get('theme_primary_color') }};\r\n            height: 128px;\r\n        }\r\n        .footer-content {\r\n            display: flex;\r\n            align-items: center;\r\n            flex-direction: column;\r\n            margin: 16px 0;\r\n        }\r\n        .footer-logo {\r\n            font-size: 24px;\r\n            color: {{ $settings->get('theme_primary_color') }};\r\n        }\r\n        .footer-copyright {\r\n            font-size: 12px;\r\n            opacity: .6;\r\n        }\r\n    </style>\r\n    @if ($forumStyle !== '')\r\n    <style>\r\n        {!! $forumStyle !!}\r\n    </style>\r\n    @endif\r\n</head>\r\n\r\n<body>\r\n<div class=\"main\">\r\n    <div class=\"logo-container\">\r\n        <svg class=\"logo\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><!--!Font Awesome Free v5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->\r\n            <path d=\"M480 288c0-80.25-49.28-148.92-119.19-177.62L320 192V80a16 16 0 0 0-16-16h-96a16 16 0 0 0-16 16v112l-40.81-81.62C81.28 139.08 32 207.75 32 288v64h448zm16 96H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h480a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z\"/>\r\n        </svg>\r\n    </div>\r\n    <h1>{{ $settings->get('klxf-maintenance.title') }}</h1>\r\n    <div class=\"content\">{!! $settings->get('klxf-maintenance.message') !!}</div>\r\n</div>\r\n\r\n<div class=\"footer\">\r\n    <div class=\"footer-content\">\r\n        <div class=\"footer-logo\">{{ $settings->get('forum_title') }}</div>\r\n        <div class=\"footer-copyright\">\r\n            This page using <a href=\"https://github.com/klxf/flarum-maintenance\" target=\"_blank\">klxf/flarum-maintenance</a>.\r\n        </div>\r\n    </div>\r\n</div>\r\n</body>\r\n\r\n</html>\r\n`;\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","AdminTipsWidget","_DashboardWidget","apply","arguments","create","constructor","_proto","className","content","title","app","trans","detail","m","Alert","type","dismissible","icon","DashboardWidget","add","extend","DashboardPage","items","settings","registerSetting","setting","label","help","rows","_this","Button","onclick","redraw","class","style","registerPermission","permission"],"sourceRoot":""}